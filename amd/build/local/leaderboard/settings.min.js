define("block_stash/local/leaderboard/settings",["exports","core/toast","core/ajax"],(function(_exports,_toast,_ajax){var obj;
/**
   * Leaderboard settings JavaScript
   *
   * @copyright 2023 Adrian Greeve <adriangreeve.com>
   * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{document.querySelector(".block-stash-lbsetting").addEventListener("change",(e=>{let currenttarget=e.currentTarget;updateSetting(currenttarget.dataset.courseid,"leaderboard",currenttarget.checked).then((result=>{result&&(0,_toast.add)("Setting updated",{type:"info",autohide:!0,closeButton:!0})}))})),document.querySelector(".block-stash-lbgroups").addEventListener("change",(e=>{let currenttarget=e.currentTarget;updateSetting(currenttarget.dataset.courseid,"leaderboard_groups",currenttarget.checked).then((result=>{result&&(0,_toast.add)("Setting updated",{type:"info",autohide:!0,closeButton:!0})}))})),document.querySelectorAll(".block_stash-leaderboard").forEach((board=>{board.addEventListener("change",(e=>{let otherboardelement=e.currentTarget,enabled=otherboardelement.checked;updateLeaderboard(otherboardelement.dataset.courseid,otherboardelement.dataset.location,"","DESC",5,enabled).then((result=>{result&&(0,_toast.add)("Setting updated",{type:"info",autohide:!0,closeButton:!0})}))}))}))};const updateSetting=(courseid,key,value)=>_ajax.default.call([{methodname:"block_stash_leaderboard_settings",args:{courseid:courseid,key:key,value:value}}])[0],updateLeaderboard=(courseid,title,options,sortorder,limit,enabled)=>_ajax.default.call([{methodname:"block_stash_leaderboard_update",args:{courseid:courseid,boardname:title,options:options,sortorder:sortorder,rowlimit:limit,enabled:enabled}}])[0]}));

//# sourceMappingURL=settings.min.js.map